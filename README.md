# Remote Object Access
Implement a mechanism for different JavaScript contexts to access same object in an asynchronous way.

## Concept

Use `consumer` and `provider` functions in the different contexts. Both functions are generated by the corresponding create methods:

```js
  const { consumer, dispose } = createConsumer({
    channel: socket,
    transformer,
  });
```
```js
 let provider = createProvider({ channel: socket, transformer });
```

Both create functions accept `channel` and `transformer` properties in order to make the API use different channels and format the transported values according to the channel specifics.

### `channel`
This is the abstract channel object. It should have `emit` and `on` methods. `emit` accepts two arguments - `event` {string} and `payload` {any}. `on` accepts two arguments - `event` {string} and `callback` {function} that is called with the `emit`'s payload as argument for the corresponding event.

### `transformer`
This is an object that provides two methods - `onEmit` that accepts the value to be emitted and transforms the value to appropriate type in order to be passed through the `cannel`. The `onReceive` method is used to transform the emitted value to its original type.

## Accessing and setting properties
The `consumer` function returns [`Proxy`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy) object. This is used in order to get the properties, call functions and set properties in asynchronous way using the proxy's traps.

## Dispose remote functions and objects
The `dispose` method is provided by the `createConsumer` function. It can be used to dispose both remote functions and remote objects.

## Limitations
Currently the API doesn't support returning nested objects recursively. It will stringify and then parse an object property. Also one level of remote functions generation is supported. 

## Develop
1. Clone the repo
2. Navigate to the projects root folder and run:
```
yarn install
```
3. In one terminals first run the task that will compile and recompile the API's library:
```
yarn dev:lib
```
4. In second separate terminal run the server:
```
yarn start
```
5. Open browser on `localhost:3000` and open the console in the dev tools to observe the logs.

## Build
1. Clone the repo
2. Navigate to the projects root folder and run:
```
yarn install
```
3. In one terminals first run the task that will compile API's library for production:
```
yarn build:lib
```
4. In the same terminal run the server:
```
yarn start
```
5. Open browser on `localhost:3000` and open the console in the dev tools to observe the logs.


## Test
1. Clone the repo
2. Navigate to the projects root folder and run:
```
yarn install
```
3. Run the following command in the terminal:
```
yarn test
```